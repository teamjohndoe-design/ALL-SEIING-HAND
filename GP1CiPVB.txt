-- âœ… JOHN DOE EXECUTOR - FINAL VERSION

local player = game.Players.LocalPlayer
local UIS = game:GetService("UserInputService")
local TweenService = game:GetService("TweenService")

-- GUI
local gui = Instance.new("ScreenGui")
gui.Name = "JohnDoeExecutor"
gui.ResetOnSpawn = false
gui.IgnoreGuiInset = true
gui.ZIndexBehavior = Enum.ZIndexBehavior.Sibling
gui.Parent = player:WaitForChild("PlayerGui")

-- FRAME UTAMA
local frame = Instance.new("Frame")
frame.Size = UDim2.new(0, 500, 0, 270)
frame.Position = UDim2.new(0.5, -250, 0.5, -135)
frame.BackgroundColor3 = Color3.fromRGB(15, 15, 15)
frame.BorderSizePixel = 1
frame.BorderColor3 = Color3.fromRGB(60, 60, 60)
frame.Active = true
frame.Selectable = true
frame.Parent = gui

local outline = Instance.new("UIStroke", frame)
outline.Color = Color3.fromRGB(70, 70, 70)
outline.Thickness = 1.5

-- JUDUL
local title = Instance.new("TextLabel")
title.Size = UDim2.new(1, 0, 0, 30)
title.BackgroundTransparency = 1
title.Text = "John Doe Executor"
title.TextColor3 = Color3.fromRGB(255, 191, 0)
title.Font = Enum.Font.SourceSansBold
title.TextSize = 22
title.TextStrokeTransparency = 0.8
title.TextXAlignment = Enum.TextXAlignment.Center
title.Parent = frame

-- âœ… DRAG SYSTEM
local dragging = false
local dragInput, dragStart, startPos

frame.InputBegan:Connect(function(input)
	if input.UserInputType == Enum.UserInputType.MouseButton1 then
		dragging = true
		dragStart = input.Position
		startPos = frame.Position
		input.Changed:Connect(function()
			if input.UserInputState == Enum.UserInputState.End then
				dragging = false
			end
		end)
	end
end)

frame.InputChanged:Connect(function(input)
	if input.UserInputType == Enum.UserInputType.MouseMovement then
		dragInput = input
	end
end)

UIS.InputChanged:Connect(function(input)
	if dragging and input == dragInput then
		local delta = input.Position - dragStart
		frame.Position = UDim2.new(
			startPos.X.Scale, startPos.X.Offset + delta.X,
			startPos.Y.Scale, startPos.Y.Offset + delta.Y
		)
	end
end)
 
frame.Active = true
frame.Draggable = true

-- TEXTBOX SCRIPT
local scriptBox = Instance.new("TextBox")
scriptBox.Size = UDim2.new(0.55, 0, 0.5, 0)
scriptBox.Position = UDim2.new(0.02, 0, 0.15, 0)
scriptBox.BackgroundColor3 = Color3.fromRGB(25, 25, 25)
scriptBox.TextColor3 = Color3.fromRGB(255, 255, 255)
scriptBox.Font = Enum.Font.Code
scriptBox.TextSize = 18
scriptBox.ClearTextOnFocus = false
scriptBox.MultiLine = true
scriptBox.TextXAlignment = Enum.TextXAlignment.Left
scriptBox.TextYAlignment = Enum.TextYAlignment.Top
scriptBox.PlaceholderText = "Type script here..."
scriptBox.Parent = frame

local boxStroke = Instance.new("UIStroke", scriptBox)
boxStroke.Color = Color3.fromRGB(80, 80, 100)
boxStroke.Thickness = 1

-- 3 KOTAK SAMPING
for i = 1, 3 do
	local kotak = Instance.new("Frame")
	kotak.Size = UDim2.new(0, 130, 0, 35)
	kotak.Position = UDim2.new(0.62, 0, 0.15 + (i - 1) * 0.17, 0)
	kotak.BackgroundColor3 = Color3.fromRGB(20, 20, 20)
	kotak.Parent = frame
	local stroke = Instance.new("UIStroke", kotak)
	stroke.Color = Color3.fromRGB(80, 80, 100)
	stroke.Thickness = 1
end

-- TOMBOL
local function makeButton(name, text, posX)
	local btn = Instance.new("TextButton")
	btn.Name = name
	btn.Size = UDim2.new(0, 100, 0, 30)
	btn.Position = UDim2.new(0, posX, 0.68, 0)
	btn.BackgroundColor3 = Color3.fromRGB(45, 45, 45)
	btn.TextColor3 = Color3.new(1, 1, 1)
	btn.Font = Enum.Font.SourceSansBold
	btn.TextSize = 16
	btn.Text = text
	btn.Parent = frame
	return btn
end

local executeBtn = makeButton("Execute", "Execute", 30)
local clearBtn = makeButton("Clear", "Clear", 190)
local hideBtn = makeButton("HideText", "Hide Text", 350)

-- GARIS KUNING
local garis = Instance.new("Frame")
garis.Size = UDim2.new(1, 0, 0, 2)
garis.Position = UDim2.new(0, 0, 1, -22)
garis.BackgroundColor3 = Color3.fromRGB(255, 191, 0)
garis.Parent = frame

-- STATUS
local status = Instance.new("TextLabel")
status.Size = UDim2.new(1, 0, 0, 20)
status.Position = UDim2.new(0, 0, 1, -20)
status.BackgroundTransparency = 1
status.Text = "John Doe Executor made by John Doe | Modif by AufarExploit | Status: Ready!"
status.TextColor3 = Color3.fromRGB(200, 200, 200)
status.Font = Enum.Font.SourceSans
status.TextSize = 14
status.TextXAlignment = Enum.TextXAlignment.Center
status.Parent = frame

-- BUTTON ACTIONS
clearBtn.MouseButton1Click:Connect(function()
	scriptBox.Text = ""
end)

hideBtn.MouseButton1Click:Connect(function()
	scriptBox.Visible = not scriptBox.Visible
	hideBtn.Text = scriptBox.Visible and "Hide Text" or "Show Text"
end)

executeBtn.MouseButton1Click:Connect(function()
	local script = scriptBox.Text
	if script and script ~= "" then
		local func, err = loadstring(script)
		if func then
			pcall(func)
		else
			warn("Script Error:", err)
		end
	end
end)

-- ðŸ”˜ TOMBOL BUKA/TUTUP (Samping Kiri Tengah)
local toggleButton = Instance.new("ImageButton")
toggleButton.Name = "ToggleButton"
toggleButton.Size = UDim2.new(0, 40, 0, 40)
toggleButton.Position = UDim2.new(0, 10, 0.5, -20)
toggleButton.AnchorPoint = Vector2.new(0, 0)
toggleButton.BackgroundColor3 = Color3.fromRGB(255, 191, 0)
toggleButton.Image = "rbxassetid://12231935047" -- Ganti ID dengan logo John Doe
toggleButton.BorderSizePixel = 0
toggleButton.Parent = gui

local toggleCorner = Instance.new("UICorner", toggleButton)
toggleCorner.CornerRadius = UDim.new(1, 0)

-- ðŸŒ€ Fungsi Buka/Tutup Frame
local isVisible = true
toggleButton.MouseButton1Click:Connect(function()
	isVisible = not isVisible
	if isVisible then
		frame.Visible = true
		toggleButton.BackgroundColor3 = Color3.fromRGB(255, 191, 0)
		local tweenIn = TweenService:Create(frame, TweenInfo.new(0.25, Enum.EasingStyle.Sine), {
			Size = UDim2.new(0, 500, 0, 270),
			Position = UDim2.new(0.5, -250, 0.5, -135)
		})
		tweenIn:Play()
	else
		toggleButton.BackgroundColor3 = Color3.fromRGB(70, 70, 70)
		local tweenOut = TweenService:Create(frame, TweenInfo.new(0.25, Enum.EasingStyle.Sine), {
			Size = UDim2.new(0, 0, 0, 0),
			Position = UDim2.new(0.5, 0, 0.5, 0)
		})
		tweenOut:Play()
		wait(0.26)
		frame.Visible = false
	end
end)